---
import Layout from "../layouts/Layout.astro";
import Images from "../components/ui/Images.astro";
import HeroImage from "../assets/img/newhero10.webp";
import ContactModal from "../components/ui/ContactModal.astro";
---

<Layout 
  title="Contact Rule The Web | Modern Web Solutions Consultation" 
  description="Schedule a free consultation or send a message about migrating from WordPress, building modern static sites, or agency partnership opportunities."
  robots="index,follow"
>
    <!-- Hero Section -->
    <section class="bg-base-100 text-base-900">
        <div class="grid max-w-screen-xl px-4 py-6 sm:py-8 md:py-12 xl:py-16 2xl:py-28 lg:px-6 mx-auto lg:grid-cols-12">
            <div class="mr-auto place-self-center lg:col-span-5">
                <h1 class="max-w-2xl mb-4 text-2xl font-extrabold leading-none tracking-tight md:text-3xl xl:text-4xl">
                    Let's Build Your Modern Web Stack
                </h1>
                <p class="max-w-2xl mb-6 font-light text-base-600 lg:mb-8 md:text-lg lg:text-xl">
                    Whether you're an agency looking to increase margins, a business wanting to escape WordPress bloat, 
                    or a developer interested in our modern stack—we're here to help you build faster, cheaper, 
                    better-performing websites.
                </p>
                <div class="space-y-4 sm:flex sm:space-y-0 sm:space-x-4">
                    <!-- Schedule Call Button -->
                    <button
                      title="A FREE no obligation callback consultation!!"
                      id="open-calendar-btn"
                      type="button"
                      class="btn btn-primary p-2"
                    >Schedule A Consultation
                    </button>
                    
                    <!-- Contact Form Modal Trigger -->
                    <button
                        title="Use this form to send an inquiry."
                        id="contact-modal-btn"
                        type="button"
                        class="btn btn-outline p-2"
                    >Send Quick Message
                    </button>
                </div>
                <p class="mt-4 text-sm text-base-600">
                    ⏱️ Typical response time: 2-4 hours during business days
                </p>
            </div>
            <div class="hidden lg:mt-0 lg:col-span-7 lg:flex">
            <Images 
              src={HeroImage} 
              alt="Modern web development hero"
              component="picture"
              formats={['avif', 'webp']}
              sizes="(max-width: 768px) 100vw, 1200px"
              widths={[400, 800, 1200]}
              className="w-full h-auto rounded-lg"
              loading="eager" // For hero image
              fetchpriority="high"
            />
            </div>
        </div>
    </section>

    <!-- Testimonial -->
    <section class="bg-base-200">
        <div class="max-w-screen-xl px-4 py-8 mx-auto text-center lg:py-24 lg:px-6">
            <figure class="max-w-screen-md mx-auto">
                <svg class="h-12 mx-auto mb-3 text-base-400" viewBox="0 0 24 27" fill="none">
                    <path d="M14.017 18L14.017 10.609C14.017 4.905 17.748 1.039 23 0L23.995 2.151C21.563 3.068 20 5.789 20 8H24V18H14.017ZM0 18V10.609C0 4.905 3.748 1.038 9 0L9.996 2.151C7.563 3.068 6 5.789 6 8H9.983L9.983 18L0 18Z" fill="currentColor"></path>
                </svg>
                <blockquote>
                    <p class="text-xl font-medium text-base-900 md:text-2xl">
                        "The migration consultation saved us $4,200/month in hosting costs alone. 
                        Their modern stack blueprint was exactly what our agency needed to stay competitive."
                    </p>
                </blockquote>
                <figcaption class="flex items-center justify-center mt-6 space-x-3">
                    <img 
                      class="w-8 h-8 rounded-full" 
                      src="https://gravatar.com/userimage/98702177/e0373967533412a9a86a6b2e2fb9e176.jpeg" 
                      alt="Agency owner testimonial" 
                      loading="lazy"
                    />
                    <div class="flex items-center divide-x-2 divide-base-500">
                        <div class="pr-3 font-medium text-base-900">Sarah K.</div>
                        <div class="pl-3 text-sm font-light text-base-600">
                            Agency Owner, 25+ client sites migrated
                        </div>
                    </div>
                </figcaption>
            </figure>
        </div>
    </section>

    <div id="calendar-modal" class="hidden fixed inset-0 z-50 overflow-y-auto bg-base-900">
     <div class="flex min-h-full items-center justify-center p-4 bg-opacity-75">
      <div class="relative bg-base-100 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
       <div class="flex justify-between items-center p-4 border-b border-base-300">
        <h3 class="text-xl font-semibold">Schedule a Call</h3>
        <button id="close-calendar" class="text-base-600 hover:text-base-800">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="p-1">
        <!-- Cal.com embed -->
        <iframe 
          src="https://app.cal.com/mike-alberts-b1p5j2/free" 
          class="w-full h-[610px] border-0"
          title="Schedule a consultation"
          loading="lazy"
        ></iframe>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const openBtn = document.getElementById('open-calendar-btn');
    const modal = document.getElementById('calendar-modal');
    const closeBtn = document.getElementById('close-calendar');
    
    if (openBtn && modal) {
      openBtn.addEventListener('click', () => {
        modal.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
      });
      
      closeBtn.addEventListener('click', () => {
        modal.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
      });
      
      // Close when clicking backdrop
      modal.addEventListener('click', (e) => {
        if (e.target.classList.contains('bg-opacity-75')) {
            modal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }
    });
  }
  });
</script>

    <!-- Our Contact Modal Component -->
    <ContactModal />
    
    <!-- Schedule Call Modal/Calendar Integration -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Contact modal button
            const contactBtn = document.getElementById('contact-modal-btn');
            const contactModal = document.getElementById('contact-modal');
            
            if (contactBtn && contactModal) {
                contactBtn.addEventListener('click', function() {
                    contactModal.classList.remove('hidden');
                    contactModal.setAttribute('aria-hidden', 'false');
                    document.body.classList.add('overflow-hidden');
                });
            }           
            // Schedule call button - simple redirect for now
            const scheduleBtn = document.getElementById('schedule-call-btn');
            if (scheduleBtn) {
                scheduleBtn.addEventListener('click', function() {
                    // Direct to Cal.com for now, we'll replace this later
                    window.open('https://cal.com/mike-alberts-b1p5j2/free', '_blank');
                });
            }            
            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && contactModal && !contactModal.classList.contains('hidden')) {
                    contactModal.classList.add('hidden');
                    contactModal.setAttribute('aria-hidden', 'true');
                    document.body.classList.remove('overflow-hidden');
                }
            });
        });
    </script>
</Layout>